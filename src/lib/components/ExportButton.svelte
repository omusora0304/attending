<script lang="ts">
    import { downloadCSV } from '$lib/utils/export';
    
    export let label = 'CSVã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ';
    export let filename = 'export.csv';
    export let content: string;
    export let disabled = false;
    
    // CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå‡¦ç†
    const handleExport = () => {
      if (disabled || !content) return;
      
      try {
        downloadCSV(content, filename);
      } catch (error) {
        console.error('Export failed:', error);
        alert('ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚');
      }
    };
  </script>
  
  <button
    class="export-button"
    on:click={handleExport}
    disabled={disabled || !content}
    title={disabled ? 'ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“' : 'CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰'}
  >
    <span class="icon">ğŸ“Š</span>
    {label}
  </button>
  
  <style>
    .export-button {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      background-color: #4caf50;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 14px;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    
    .export-button:hover:not(:disabled) {
      background-color: #388e3c;
    }
    
    .export-button:disabled {
      background-color: #e0e0e0;
      color: #9e9e9e;
      cursor: not-allowed;
    }
    
    .icon {
      font-size: 16px;
    }
  </style>