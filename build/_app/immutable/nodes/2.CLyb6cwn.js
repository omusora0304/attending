import{g as vt,w as lt,t as M,s as x,b as A,h as ft,e as dt}from"../chunks/CKQCreVm.js";import{i as D}from"../chunks/Bm3K0hjP.js";import{ai as J,J as ut,aR as mt,aS as pt,e as ht,u as _t,aT as yt,aU as bt,ax as wt,Y as F,aF as K,aG as Y,aH as gt,aE as $t,y as N,z as H,aV as rt,aW as nt,C as w,ad as Q,F as b,B as V,d as kt,D as P,v as q,r as X,j as E,E as L,A as Ct,$ as Et}from"../chunks/BVNNn7ox.js";import{a as O,b as At,s as W,i as j}from"../chunks/BqwgYQ-J.js";import{n as Mt,s as St,G as Lt,i as Z,p as tt,r as Ft}from"../chunks/B9mEG7mM.js";import{e as xt,s as st,a as Rt}from"../chunks/BPY4y56w.js";import{s as Tt}from"../chunks/3iK5RE0Y.js";/* empty css                */import{p as z}from"../chunks/DUUr3DC5.js";import"../chunks/b1eVWlSn.js";const jt=()=>performance.now(),C={tick:s=>requestAnimationFrame(s),now:()=>jt(),tasks:new Set};function ot(){const s=C.now();C.tasks.forEach(t=>{t.c(s)||(C.tasks.delete(t),t.f())}),C.tasks.size!==0&&C.tick(ot)}function ct(s){let t;return C.tasks.size===0&&C.tick(ot),{promise:new Promise(e=>{C.tasks.add(t={c:s,f:e})}),abort(){C.tasks.delete(t)}}}function T(s,t){lt(()=>{s.dispatchEvent(new CustomEvent(t))})}function Ot(s){if(s==="float")return"cssFloat";if(s==="offset")return"cssOffset";if(s.startsWith("--"))return s;const t=s.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(e=>e[0].toUpperCase()+e.slice(1)).join("")}function et(s){const t={},e=s.split(";");for(const o of e){const[v,r]=o.split(":");if(!v||r===void 0)break;const i=Ot(v.trim());t[i]=r.trim()}return t}const Dt=s=>s;function Nt(s,t,e,o){var v=(s&yt)!==0,r="both",i,l=t.inert,p=t.style.overflow,n,a;function f(){var m=gt,g=J;K(null),Y(null);try{return i??(i=e()(t,(o==null?void 0:o())??{},{direction:r}))}finally{K(m),Y(g)}}var _={is_global:v,in(){t.inert=l,T(t,"introstart"),n=B(t,f(),a,1,()=>{T(t,"introend"),n==null||n.abort(),n=i=void 0,t.style.overflow=p})},out(m){t.inert=!0,T(t,"outrostart"),a=B(t,f(),n,0,()=>{T(t,"outroend"),m==null||m()})},stop:()=>{n==null||n.abort(),a==null||a.abort()}},d=J;if((d.transitions??(d.transitions=[])).push(_),vt){var u=v;if(!u){for(var c=d.parent;c&&(c.f&ut)!==0;)for(;(c=c.parent)&&(c.f&mt)===0;);u=!c||(c.f&pt)!==0}u&&ht(()=>{_t(()=>_.in())})}}function B(s,t,e,o,v){var r=o===1;if(bt(t)){var i,l=!1;return wt(()=>{if(!l){var m=t({direction:r?"in":"out"});i=B(s,m,e,o,v)}}),{abort:()=>{l=!0,i==null||i.abort()},deactivate:()=>i.deactivate(),reset:()=>i.reset(),t:()=>i.t()}}if(e==null||e.deactivate(),!(t!=null&&t.duration))return v(),{abort:F,deactivate:F,reset:F,t:()=>o};const{delay:p=0,css:n,tick:a,easing:f=Dt}=t;var _=[];if(r&&e===void 0&&(a&&a(0,1),n)){var d=et(n(0,1));_.push(d,d)}var u=()=>1-o,c=s.animate(_,{duration:p});return c.onfinish=()=>{var m=(e==null?void 0:e.t())??1-o;e==null||e.abort();var g=o-m,h=t.duration*Math.abs(g),y=[];if(h>0){var $=!1;if(n)for(var k=Math.ceil(h/16.666666666666668),S=0;S<=k;S+=1){var I=m+g*f(S/k),U=et(n(I,1-I));y.push(U),$||($=U.overflow==="hidden")}$&&(s.style.overflow="hidden"),u=()=>{var R=c.currentTime;return m+g*f(R/h)},a&&ct(()=>{if(c.playState!=="running")return!1;var R=u();return a(R,1-R),!0})}c=s.animate(y,{duration:h,fill:"forwards"}),c.onfinish=()=>{u=()=>o,a==null||a(o,1-o),v()}},{abort:()=>{c&&(c.cancel(),c.effect=null,c.onfinish=F)},deactivate:()=>{v=F},reset:()=>{o===0&&(a==null||a(1,0))},t:()=>u()}}function at(s){return Object.prototype.toString.call(s)==="[object Date]"}function G(s,t,e,o){if(typeof e=="number"||at(e)){const v=o-e,r=(e-t)/(s.dt||1/60),i=s.opts.stiffness*v,l=s.opts.damping*r,p=(i-l)*s.inv_mass,n=(r+p)*s.dt;return Math.abs(n)<s.opts.precision&&Math.abs(v)<s.opts.precision?o:(s.settled=!1,at(e)?new Date(e.getTime()+n):e+n)}else{if(Array.isArray(e))return e.map((v,r)=>G(s,t[r],e[r],o[r]));if(typeof e=="object"){const v={};for(const r in e)v[r]=G(s,t[r],e[r],o[r]);return v}else throw new Error(`Cannot spring ${typeof e} values`)}}function Pt(s,t={}){const e=$t(s),{stiffness:o=.15,damping:v=.8,precision:r=.01}=t;let i,l,p,n=s,a=s,f=1,_=0,d=!1;function u(m,g={}){a=m;const h=p={};return s==null||g.hard||c.stiffness>=1&&c.damping>=1?(d=!0,i=C.now(),n=m,e.set(s=a),Promise.resolve()):(g.soft&&(_=1/((g.soft===!0?.5:+g.soft)*60),f=0),l||(i=C.now(),d=!1,l=ct(y=>{if(d)return d=!1,l=null,!1;f=Math.min(f+_,1);const $=Math.min(y-i,1e3/30),k={inv_mass:f,opts:c,settled:!0,dt:$*60/1e3},S=G(k,n,s,a);return i=y,n=s,e.set(s=S),k.settled&&(l=null),!k.settled})),new Promise(y=>{l.promise.then(()=>{h===p&&y()})}))}const c={set:u,update:(m,g)=>u(m(a,s),g),subscribe:e.subscribe,stiffness:o,damping:v,precision:r};return c}var qt=M('<div class="counter-container svelte-327mp2"><span class="counter-value svelte-327mp2"> <span class="unit svelte-327mp2">人</span></span> <span class="counter-label svelte-327mp2">入室中</span></div>');function zt(s,t){N(t,!1);const[e,o]=W(),v=()=>O(i,"$displayCount",e),r=()=>O(Mt,"$inRoomCount",e),i=Pt(0,{stiffness:.1,damping:.4});H(()=>{i.set(r(),{hard:!0})}),rt(()=>r(),()=>{At(i,r())}),nt(),D();var l=qt(),p=w(l),n=w(p);Q(),b(p),Q(2),b(l),V(a=>x(n,`${a??""} `),[()=>Math.round(v())],kt),A(s,l),P(),o()}var Bt=M('<div class="counter-area svelte-12lv091"><!></div>'),Gt=M('<a href="/#" class="nav-link home svelte-12lv091">トップ</a>'),Ht=M('<a href="/#/admin" class="nav-link admin svelte-12lv091">管理</a>'),Vt=M('<header class="header svelte-12lv091"><div class="header-content svelte-12lv091"><div class="title-area svelte-12lv091"><h1 class="svelte-12lv091"> </h1> <!></div> <div class="nav-links svelte-12lv091"><!></div></div></header>');function Wt(s,t){N(t,!1);const e=X();let o=z(t,"title",8,"滞在管理システム v1.2"),v=z(t,"showCounter",8,!0),r=z(t,"showAdminLink",8,!0),i=X("/");H(()=>{q(i,window.location.hash.slice(1)||"/"),window.addEventListener("hashchange",()=>{q(i,window.location.hash.slice(1)||"/")})}),rt(()=>E(i),()=>{q(e,E(i).startsWith("/admin"))}),nt(),D();var l=Vt(),p=w(l),n=w(p),a=w(n),f=w(a,!0);b(a);var _=L(a,2);{var d=h=>{var y=Bt(),$=w(y);zt($,{}),b(y),A(h,y)};j(_,h=>{v()&&h(d)})}b(n);var u=L(n,2),c=w(u);{var m=h=>{var y=Gt();A(h,y)},g=(h,y)=>{{var $=k=>{var S=Ht();A(k,S)};j(h,k=>{r()&&k($)},y)}};j(c,h=>{E(e)?h(m):h(g,!1)})}b(u),b(p),b(l),V(()=>x(f,o())),A(s,l),P()}function It(s){const t=s-1;return t*t*t+1}function it(s){const t=typeof s=="string"&&s.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[s,"px"]}function Ut(s,{delay:t=0,duration:e=400,easing:o=It,x:v=0,y:r=0,opacity:i=0}={}){const l=getComputedStyle(s),p=+l.opacity,n=l.transform==="none"?"":l.transform,a=p*(1-i),[f,_]=it(v),[d,u]=it(r);return{delay:t,duration:e,easing:o,css:(c,m)=>`
			transform: ${n} translate(${(1-c)*f}${_}, ${(1-c)*d}${u});
			opacity: ${p-a*m}`}}var Jt=M('<p class="empty-message svelte-11l7t2a">メンバーがいません</p>'),Kt=M('<a><div class="member-info svelte-11l7t2a"><div class="member-grade svelte-11l7t2a"> </div> <div class="member-name svelte-11l7t2a"> </div></div> <div> </div></a>'),Yt=M('<div class="member-list svelte-11l7t2a"></div>'),Qt=M('<div class="member-list-container svelte-11l7t2a"><div class="members-container svelte-11l7t2a"><!></div></div>');function Xt(s,t){N(t,!1);const[e,o]=W(),v=()=>O(St,"$sortedMembers",e);D();var r=Qt(),i=w(r),l=w(i);{var p=a=>{var f=Jt();A(a,f)},n=a=>{var f=Yt();xt(f,5,v,_=>_.id,(_,d)=>{var u=Kt(),c=w(u),m=w(c),g=w(m,!0);b(m);var h=L(m,2),y=w(h,!0);b(h),b(c);var $=L(c,2),k=w($,!0);b($),b(u),V(()=>{Tt(u,"href",`/#/member/${E(d).id??""}`),st(u,1,`member-item ${E(d).status??""}`,"svelte-11l7t2a"),Rt(u,`--grade-color: ${Lt[E(d).grade]??""}`),x(g,E(d).grade),x(y,E(d).name),st($,1,`member-status-text ${E(d).status??""}`,"svelte-11l7t2a"),x(k,E(d).status==="in"?"入室中":"退室中")}),Nt(3,u,()=>Ut,()=>({y:10,duration:200})),A(_,u)}),b(f),A(a,f)};j(l,a=>{v().length===0?a(p):a(n,!1)})}b(i),b(r),A(s,r),P(),o()}var Zt=M('<div class="home-page svelte-17nyr6j"><!> <main class="svelte-17nyr6j"><!></main> <button class="refresh-button svelte-17nyr6j"><svg class="refresh-icon svelte-17nyr6j" viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path></svg> 更新</button></div>');function ls(s,t){N(t,!1);const[e,o]=W(),v=()=>O(Ft,"$connectionStatus",e),r=()=>{tt(),Z()};H(()=>{Z();const f=()=>{document.visibilityState==="visible"&&v()==="disconnected"&&r()};return document.addEventListener("visibilitychange",f),()=>{document.removeEventListener("visibilitychange",f)}}),Ct(()=>{tt()}),D();var i=Zt();ft(f=>{Et.title="滞在管理システム"});var l=w(i);Wt(l,{});var p=L(l,2),n=w(p);Xt(n,{}),b(p);var a=L(p,2);b(i),dt("click",a,()=>{const f=document.querySelector(".refresh-icon");f.style.animation="none",f.offsetHeight,f.style.animation="spin 0.5s linear","caches"in window&&caches.keys().then(_=>{_.forEach(d=>{caches.delete(d)})}),window.location.reload()}),A(s,i),P(),o()}export{ls as component};
